<html>
<head>
    <script type="text/javascript" src="js files/charts.js"></script>
    <script type="text/javascript" src="js files/base.js"></script>
    <script type="text/javascript" src="js files/store.js"></script>
    <script type="text/javascript" src="js files/render.js"></script>
    <script type="text/javascript" src="js files/raphael-min.js"></script>
    <script type="text/javascript" src="js files/DrawingAPI.js"></script>
    <script type="text/javascript" src="js files/event.js"></script>
    
    <script>
        var data = {
            "chart": {
                "width":"900",
                "height":"500",
                "caption": "QuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQuaQua",
                "subcaption": "Last year",
                "xaxisname": "Quarter (Click to display the value)",
                "yaxisname": "Revenue (In USD)",
                "numberPrefix": "$",
                "theme": "fint"
            },
            "data": [
                {
                    "label": "Q1",
                    "value": "1950000",
                    "link": {
                        "chart": {
                            "caption": "Monthly Revenue",
                            "width":"900",
                            "height":"500",
                            "subcaption": "First Quarter",
                            "xaxisname": "Month",
                            "yaxisname": "Revenue (In USD)",
                            "numberPrefix": "$",
                            "theme": "fint"
                        },
                        "data": [
                            {
                                "label": "Jan",
                                "value": "420000"
                            },
                            {
                                "label": "Feb",
                                "value": "810000"
                            },
                            {
                                "label": "Mar",
                                "value": "720000"
                            }
                        ]
                    }
                },
                {
                    "label": "Q2",
                    "value": "1970000",
                    "link": {
                        "chart": {
                            "caption": "Monthly Revenue",
                            "width":"900",
                            "height":"500",
                            "subcaption": "Second Quarter",
                            "xaxisname": "Month",
                            "yaxisname": "Revenue (In USD)",
                            "numberPrefix": "$",
                            "theme": "fint"
                        },
                        "data": [
                            {
                                "label": "Apr",
                                "value": "550000"
                            },
                            {
                                "label": "May",
                                "value": "910000"
                            },
                            {
                                "label": "Jun",
                                "value": "510000"
                            }
                        ]
                    } 
                },
                {
                    "label": "Q3",
                    "value": "1910000",
                    "link": {
                        "chart": {
                            "caption": "Monthly Revenue",
                            "width":"900",
                            "height":"500",
                            "subcaption": "Third Quarter",
                            "xaxisname": "Month",
                            "yaxisname": "Revenue (In USD)",
                            "numberPrefix": "$",
                            "theme": "fint"
                        },
                        "data": [
                            {
                                "label": "Jul",
                                "value": "680000"
                            },
                            {
                                "label": "Aug",
                                "value": "620000"
                            },
                            {
                                "label": "Sep",
                                "value": "610000"
                            }
                        ]
                    }  
                },
                {
                    "label": "Q4",
                    "value": "2120000",
                    "link": {
                        "chart": {
                            "caption": "Monthly Revenue",
                            "subcaption": "Fourth Quarter",
                            "width":"900",
                            "height":"500",
                            "xaxisname": "Month",
                            "yaxisname": "Revenue (In USD)",
                            "numberPrefix": "$",
                            "theme": "fint"
                        },
                        "data": [
                            {
                                "label": "Oct",
                                "value": "490000"
                            },
                            {
                                "label": "Nov",
                                "value": "900000"
                            },
                            {
                                "label": "Dec",
                                "value": "730000"
                            }
                        ]
                    }
                }
            ]
        },
        data1=data;
        var chart = new AyanCharts();
        window.onload=function(){
            paper = Raphael(0, 0, data.chart.width, data.chart.height);
            //var a = paper.text(100,100,data.chart.caption);
            chart.render();
            debugger;
            var l = (data.chart.caption.split("")).length;
            alert('len : '+l);

            var i=0,s = data.chart.caption,a;
            for(i=0;i<=10;i++){
                    if((paper.text(0,0,data.chart.caption).getBBox().width) > 0.05*data.chart.width)
                    {
                        debugger;
                        if(i===10){
                        s=(data.chart.caption.substring(0, (0.1*data.chart.width)-50))+"(...)";
                        //alert(s.length);
                        a=paper.text(100,50+(13*i),s);
                        a.attr({"text-anchor": "start"});
                        debugger;
                    }

                    else{
                        s=data.chart.caption.substring(0, (0.05*data.chart.width));
                        a=paper.text(100,50+(13*i),s);
                        a.attr({"text-anchor": "start"});
                        
                    }
                        
                    data.chart.caption = "\n" + data.chart.caption.substring((0.05*data.chart.width), l);
                    //alert((data.chart.caption).length);
                    }
                }
                    
                    
                
            }
            

            /*alert(paper.text(300,100,data.chart.caption).getBBox().height);
            alert(0.3*data.chart.width);*/
        
        
    </script>
</head>
<body>
</body>
</html>
